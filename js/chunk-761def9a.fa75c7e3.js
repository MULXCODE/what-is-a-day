(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-761def9a"],{"0b5c":function(a,t,e){"use strict";e("ac6a");var i=e("cebc"),o=(e("c5f6"),e("bd86")),r=e("5001"),n=e.n(r),s=e("7a05"),c=e("ac99"),h=2*Math.PI,l=Math.PI/180;function d(a,t,e){var i=.5*e,o=(t-a)%e;return(o-i)%e+i}function u(a){var t=Math.floor(a/60),e=Math.floor(a-60*t),i=t>=12?"pm":"am";return"pm"===i&&(t-=12),t=(t+11)%12+1,t<10&&(t="0"+t),e<10&&(e="0"+e),"".concat(t,":").concat(e).concat(i)}function m(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a.reduce(function(a,e){return a[e]={get:function(){return this.copilotState[e]},set:function(a){if(a!==this.copilotState[e]){var i=t;a.$meddleOptions&&(i=a.$meddleOptions,a=a.$value),this.frames.meddle(Object(o["a"])({},e,a),i),"orbitalPosition"!==e&&Object(c["a"])(this,e,a)}}},a},{})}var g=n.a.Easing.Elastic.Out;t["a"]={inject:["player"],props:{viewWidth:Number,viewHeight:Number,playerLoading:Boolean},data:function(){return{deg:l,pauseOnPlay:!0,cameraZoomCorrection:1,showEarthOptionsModal:!1,cameraDragging:!1,controlsOpen:!1,graphOpen:!1,paused:!0,yearAngleDrag:!1,playRate:.1,copilotState:{}}},computed:Object(i["a"])({daysPerYear:function(){return this.solarDaysPerYear+1},eot:function(){return this.getEOT()},radsPerYear:function(){return h/this.daysPerYear},meanAnomaly:function(){return this.day*this.radsPerYear-s["a"]},day:function(){return this.orbitalPosition*this.daysPerYear},dayAngle:function(){return(360*this.day-1)%360+1},siderealClock:function(){var a=1440,t=(this.day+.5)%1,e=a*t;return u(e)},meanClock:function(){var a=1440,t=(this.day*(1-1/this.daysPerYear)+s["a"]/h+.5)%1,e=a*t;return u(e)},solarClock:function(){var a=1440,t=(this.day*(1-1/this.daysPerYear)+s["a"]/h+.5+this.getEOT()/h)%1,e=a*t;return u(e)},handsOff:function(){return this.player.paused||this.copilotState.handsOff},enableDragging:function(){return this.showSun||this.showEarthOrbits},solarLabelAbove:function(){var a=this.cameraTheta/h,t=Object(s["d"])(this.orbitalPosition+a,1)<.5,e=this.cameraTopDown;return this.eot>0^t^e},cameraTheta:function(){var a=this.copilotState.cameraPosition.x,t=this.copilotState.cameraPosition.z;return Object(s["d"])(Math.atan2(t,a),h)},cameraTopDown:function(){var a=this.copilotState.cameraPosition.y;return a>=0}},m(["highlight","highlightControl","orbitalPosition","eccentricity","tiltAngle","cameraTarget","cameraFollow","solarDaysPerYear","showEarthOrbits","showSunOrbits","showEOTWedge","showSun","showMeanSun","showMonthLabels","showSiderialDayArc","showMeanDayArc","showSolarDayArc","showPM","showGrid","showStellarClock","showSolarClock","showMeanClock","showDegrees"],{relaxDelay:1e3,relaxDuration:1e3,easing:g})),watch:{handsOff:function(a){this.frames.freeze(a,!0)}},created:function(){var a=this;this.queues=[],this.initCopilot();var t=this.frames;this.setState(Object(i["a"])({},this.frames._defaultState));var e=n.a.Animation.Smoothener(t,{duration:80}),o=function(){var a=t.state;e.setState(a)},r=0,s=function(e){a.beforeFrame();var i=t.state,o=r?1e3/60:r-e;r=e,a.onFrame(i,o)},c=this.player.$watch("time",function(e){t.seek(e),a.execQueues(e)});t.on("update",o),this.$on("hook:mounted",function(){a.player.$on("frame",s)}),this.$on("hook:beforeDestroy",function(){c(),t.off(),a.player.$off("frame",s)});var h=function(){a.pauseOnPlay&&(a.paused=!0)};this.player.$on("play",h),this.$on("hook:beforeDestroy",function(){a.player.$off("play",h)})},mounted:function(){var a=this,t=function(){var t=1,e=window.innerWidth;e<=720&&(t=e/720),a.cameraZoomCorrection=t};window.addEventListener("resize",t),this.$on("hook:beforeDestroy",function(){return window.removeEventListener("resize",t)}),t()},methods:{beforeFrame:function(){var a=this.orbitalPosition;if(this.handsOff&&!this.paused){a+=this.playRate/100,a=Object(s["d"])(a,1);var t=this.frames.getStateAt(this.frames.time).orbitalPosition;a=t+d(t,a,1),this.orbitalPosition={$value:a,$meddleOptions:{freeze:this.handsOff,relaxDelay:0,relaxDuration:1,easing:n.a.Easing.Quadratic.InOut}}}else if(this.paused&&this.yearAngleDrag){var e=this.yearAngleDrag/h,i=.5,o=e-a;Math.abs(o)>i&&(o>0?o-=1:o+=1),a+=.05*o,a=Object(s["d"])(a,this.daysPerYear);var r=this.frames.getStateAt(this.frames.time).orbitalPosition;a=r+d(r,a,1),this.orbitalPosition={$value:a,$meddleOptions:{freeze:this.handsOff,relaxDelay:1e3,relaxDuration:1e3,easing:g}}}},onFrame:function(a){this.setState(a)},setState:function(a){this.$refs.sim&&this.$refs.sim.setCameraProperties({position:a.cameraPosition,zoom:a.cameraZoom*this.cameraZoomCorrection}),this.copilotState=a},dragStart:function(){this.dragging=!0,this.prevPauseState=this.paused,this.paused=!0},drag:function(a){this.yearAngleDrag=this.meanAnomaly+a},dragEnd:function(){this.dragging=!1,this.yearAngleDrag=!1,this.paused=this.prevPauseState},meddleCamera:function(a){var t={};a&&(t.cameraPosition=a.position.clone(),t.cameraZoom=a.zoom/this.cameraZoomCorrection),this.frames.meddle("camera",t,{relaxDelay:1e3,relaxDuration:1e3,freeze:this.handsOff||this.cameraDragging,easing:n.a.Easing.Cubic.InOut})},setQueue:function(a,t){var e=n.a.Parsers.timeParser(a);this.queues.push({time:e,fn:t})},execQueues:function(a){var t=this.lastQueueTime||0;this.lastQueueTime=a,t>=a||this.queues.forEach(function(e){a<e.time||e.time<=t||e.fn()})},getEOT:function(){var a=this.meanAnomaly%h,t=this.eccentricity,e=this.tiltAngle,i=s["a"]-s["b"];return Object(s["c"])(a,t,e,i)}}}},"0b63":function(a,t,e){"use strict";e.r(t);var i=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"chapter"},[e("SimControls",{attrs:{handsOff:a.handsOff,highlight:a.highlightControl,paused:a.paused,playRate:a.playRate,graphOpen:a.graphOpen,cameraTarget:a.cameraTarget,cameraFollow:a.cameraFollow,solarDaysPerYear:a.solarDaysPerYear,eccentricity:a.eccentricity,showGrid:a.showGrid,showEarthOrbits:a.showEarthOrbits,showSunOrbits:a.showSunOrbits,showSun:a.showSun,showMeanSun:a.showMeanSun,showEOTWedge:a.showEOTWedge},on:{"update:paused":function(t){a.paused=t},"update:playRate":function(t){a.playRate=t},"update:play-rate":function(t){a.playRate=t},"update:graphOpen":function(t){a.graphOpen=t},"update:graph-open":function(t){a.graphOpen=t},"update:cameraTarget":function(t){a.cameraTarget=t},"update:camera-target":function(t){a.cameraTarget=t},"update:cameraFollow":function(t){a.cameraFollow=t},"update:camera-follow":function(t){a.cameraFollow=t},"update:solarDaysPerYear":function(t){a.solarDaysPerYear=t},"update:solar-days-per-year":function(t){a.solarDaysPerYear=t},"update:eccentricity":function(t){a.eccentricity=t},"update:showGrid":function(t){a.showGrid=t},"update:show-grid":function(t){a.showGrid=t},"update:showEarthOrbits":function(t){a.showEarthOrbits=t},"update:show-earth-orbits":function(t){a.showEarthOrbits=t},"update:showSunOrbits":function(t){a.showSunOrbits=t},"update:show-sun-orbits":function(t){a.showSunOrbits=t},"update:showSun":function(t){a.showSun=t},"update:show-sun":function(t){a.showSun=t},"update:showMeanSun":function(t){a.showMeanSun=t},"update:show-mean-sun":function(t){a.showMeanSun=t},"update:showEOTWedge":function(t){a.showEOTWedge=t},"update:show-e-o-t-wedge":function(t){a.showEOTWedge=t}}},[a.graphOpen?e("div",{staticClass:"eot-graph"},[e("EOTGraph",{attrs:{eccentricity:a.eccentricity,tilt:a.tiltAngle*a.deg,"mean-anomaly":a.meanAnomaly}})],1):a._e()]),e("DaySim",{ref:"sim",attrs:{viewWidth:a.viewWidth,viewHeight:a.viewHeight,highlight:a.highlight,playerLoading:a.playerLoading,showGrid:a.showGrid,cameraTarget:a.cameraTarget,cameraFollow:a.cameraFollow,showEarthOrbits:a.showEarthOrbits,showSunOrbits:a.showSunOrbits,showEOTWedge:a.showEOTWedge,showSun:a.showSun,showMeanSun:a.showMeanSun,showMonthLabels:a.showMeanSun,showSiderialDayArc:a.showSiderialDayArc,showMeanDayArc:a.showMeanDayArc,showSolarDayArc:a.showSolarDayArc,showPM:a.showPM,tiltAngle:a.tiltAngle*a.deg,eccentricity:a.eccentricity,days:a.day,daysPerYear:a.daysPerYear,enableDragging:a.enableDragging},on:{dragstart:a.dragStart,drag:a.drag,dragend:a.dragEnd,"camera:start":function(t){a.cameraDragging=!0},"camera:end":function(t){a.cameraDragging=!1,a.meddleCamera()},"camera:change":a.meddleCamera}},[e("div",{staticClass:"earth-label",attrs:{slot:"earth-label"},slot:"earth-label"},[e("transition",{attrs:{name:"fade"}},[a.showDegrees?e("label",{staticClass:"angle-label"},[a._v(a._s(a.dayAngle.toFixed(0))),e("span",{staticClass:"degrees"},[a._v("Â°")])]):a._e()])],1),e("div",{staticClass:"mean-label",class:a.copilotState.disableLabelCorrection?{}:{down:a.solarLabelAbove,up:!a.solarLabelAbove},attrs:{slot:"mean-label"},slot:"mean-label"},[e("transition",{attrs:{name:"fade"}},[a.showMeanClock?e("div",{staticClass:"clock"},[e("div",{staticClass:"time"},[a._v(a._s(a.meanClock))])]):a._e()])],1),e("div",{staticClass:"solar-label",class:a.copilotState.disableLabelCorrection?{}:{up:a.solarLabelAbove,down:!a.solarLabelAbove},attrs:{slot:"solar-label"},slot:"solar-label"},[e("transition",{attrs:{name:"fade"}},[a.showSolarClock?e("div",{staticClass:"clock",class:{pulse:a.copilotState.highlightSolarClock}},[e("div",{staticClass:"time"},[a._v(a._s(a.solarClock))])]):a._e()])],1)])],1)},o=[],r=e("bd86"),n=(e("7f7f"),e("ac6a"),e("c5f6"),e("5001")),s=e.n(n),c=e("5a89"),h=e("25e6"),l=e("d45c"),d=e("6b4b"),u=e("0b5c"),m=e("7a05"),g=2*Math.PI,f={name:"elliptic-orbit",mixins:[u["a"]],components:{DaySim:h["a"],EOTGraph:l["a"],SimControls:d["a"]},data:function(){return{}},methods:{initCopilot:function(){var a=this,t=8;function e(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=t+1,r=0;return(e||i)&&(r=Object(m["c"])(a/t*g-m["a"],e,i,m["a"]-m["b"])),(a-m["a"]/g-r/g)/(o-1)}var i=this.frames=s()({handsOff:{type:Boolean,default:!1,interpolatorOpts:{threshold:0}},highlight:{type:String,default:"",interpolator:s.a.Interpolators.Step,interpolatorOpts:{threshold:0}},highlightControl:{type:String,default:"",interpolator:s.a.Interpolators.Step,interpolatorOpts:{threshold:0}},highlightSolarClock:Boolean,disableLabelCorrection:Boolean,orbitalPosition:{type:Number,default:e(5),interpolatorOpts:{modulo:1}},solarDaysPerYear:t,tiltAngle:0,eccentricity:0,cameraTarget:{type:String,default:"sun",interpolator:s.a.Interpolators.Step,interpolatorOpts:{threshold:0}},cameraFollow:!1,showEarthOrbits:!0,showSunOrbits:!1,showEOTWedge:!1,showSun:!0,showMeanSun:!0,showMonthLabels:!0,showSiderialDayArc:!1,showMeanDayArc:!0,showSolarDayArc:!0,showPM:!0,showGrid:!1,showStellarClock:!0,showSolarClock:!0,showMeanClock:!0,showDegrees:!1,cameraPosition:{type:"Vector3",default:new c["Vector3"](0,20,.1)},cameraRotation:{type:"Vector3",default:new c["Vector3"](0,0,0)},cameraZoom:20},{defaultTransitionDuration:"3s"});function o(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"highlightControl";a.forEach(function(a){i.add(Object(r["a"])({},t,a.name),{time:a.start,duration:1}),i.add(Object(r["a"])({},t,""),{time:a.end,duration:1})})}i.add({solarDaysPerYear:t,orbitalPosition:e(5),showDegrees:!1,showMeanSun:!1,showMeanClock:!1,showMeanDayArc:!1,disableLabelCorrection:!0},{time:1,duration:1}),i.add({orbitalPosition:m["a"]/g},{time:"00:20",startTime:1}),i.add({cameraPosition:new c["Vector3"](0,0,20)},{time:"00:07",startTime:"00:05",easing:s.a.Easing.Quadratic.InOut}),i.add({cameraPosition:new c["Vector3"](0,20,.1)},{time:"00:10",startTime:"00:08",easing:s.a.Easing.Quadratic.InOut}),i.add({eccentricity:.4},{time:"23s",duration:"1s",easing:s.a.Easing.Quadratic.InOut}),i.add({eccentricity:0},{time:"24s",duration:"1s",easing:s.a.Easing.Quadratic.InOut}),i.add({tiltAngle:30},{time:"25s",duration:"1s",easing:s.a.Easing.Quadratic.InOut}),i.add({tiltAngle:0},{time:"26s",duration:"1s",easing:s.a.Easing.Quadratic.InOut}),i.add({eccentricity:.5},{time:"00:38",duration:"2s",easing:s.a.Easing.Quadratic.InOut}),o([{name:"settings",start:"39s",end:"44s"}]),i.add({orbitalPosition:12.15},{time:"02:40",startTime:"00:43"}),i.add({highlightSolarClock:!0,cameraTarget:"earth"},{time:"01:21",duration:1}),i.add({highlightSolarClock:!1,showSun:!1,showEarthOrbits:!1},{time:"01:25",duration:1}),i.add({cameraZoom:40},{time:"01:30",duration:"6s",easing:s.a.Easing.Quadratic.InOut}),i.add({showMeanClock:!0,showMeanDayArc:!0,showSolarClock:!1,showSolarDayArc:!1},{time:"02:11",duration:1}),o([{name:"mean-day-arc",start:"02:11",end:"02:15"}],"highlight"),i.add({cameraZoom:30},{time:"02:29",duration:"6s",easing:s.a.Easing.Quadratic.InOut}),i.add({showSun:!0,showEarthOrbits:!0},{time:"02:26",duration:1}),i.add({showMeanSun:!0,showSun:!1},{time:"02:44",duration:1}),i.add({orbitalPosition:13+e(0)},{time:"03:02",startTime:"02:52"}),i.add({showSun:!0,showSolarDayArc:!0,showSolarClock:!0,disableLabelCorrection:!1},{time:"03:02",duration:1}),i.add({eccentricity:0},{time:"03:10",duration:"1s",easing:s.a.Easing.Quadratic.InOut}),i.add({eccentricity:.5},{time:"03:13",duration:"1s",easing:s.a.Easing.Quadratic.InOut}),i.add({orbitalPosition:13+e(7,.5)},{time:"03:26",startTime:"03:13"}),i.add({showEOTWedge:!0},{time:"03:27",duration:1}),i.add({orbitalPosition:13+e(7)},{time:"03:39",startTime:"03:37"}),i.add({orbitalPosition:14+e(2),cameraZoom:20},{time:"03:52",startTime:"03:49",easing:s.a.Easing.Quadratic.InOut}),this.setQueue("04:03",function(){a.graphOpen=!0}),i.add({handsOff:!0},{time:"04:38",startTime:"04:00"}),this.setQueue("04:00",function(){a.paused=!1})}}},p=f,w=(e("9f6b"),e("2877")),b=Object(w["a"])(p,i,o,!1,null,"b86d3f1c",null);t["default"]=b.exports},"9f6b":function(a,t,e){"use strict";var i=e("d391"),o=e.n(i);o.a},d391:function(a,t,e){}}]);
//# sourceMappingURL=chunk-761def9a.fa75c7e3.js.map