(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f93febf"],{"0b5c":function(a,t,e){"use strict";e("ac6a");var r=e("cebc"),i=(e("c5f6"),e("bd86")),o=e("5001"),s=e.n(o),n=e("7a05"),l=e("ac99"),h=2*Math.PI,c=Math.PI/180;function d(a,t,e){var r=.5*e,i=(t-a)%e;return(i-r)%e+r}function u(a){var t=Math.floor(a/60),e=Math.floor(a-60*t),r=t>=12?"pm":"am";return"pm"===r&&(t-=12),t=(t+11)%12+1,t<10&&(t="0"+t),e<10&&(e="0"+e),"".concat(t,":").concat(e).concat(r)}function m(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a.reduce(function(a,e){return a[e]={get:function(){return this.copilotState[e]},set:function(a){if(a!==this.copilotState[e]){var r=t;a.$meddleOptions&&(r=a.$meddleOptions,a=a.$value),this.frames.meddle(Object(i["a"])({},e,a),r),"orbitalPosition"!==e&&Object(l["a"])(this,e,a)}}},a},{})}var f=s.a.Easing.Elastic.Out;t["a"]={inject:["player"],props:{viewWidth:Number,viewHeight:Number,playerLoading:Boolean},data:function(){return{deg:c,pauseOnPlay:!0,cameraZoomCorrection:1,showEarthOptionsModal:!1,cameraDragging:!1,controlsOpen:!1,graphOpen:!1,paused:!0,yearAngleDrag:!1,playRate:.1,copilotState:{}}},computed:Object(r["a"])({daysPerYear:function(){return this.solarDaysPerYear+1},eot:function(){return this.getEOT()},radsPerYear:function(){return h/this.daysPerYear},meanAnomaly:function(){return this.day*this.radsPerYear-n["a"]},day:function(){return this.orbitalPosition*this.daysPerYear},dayAngle:function(){return(360*this.day-1)%360+1},siderealClock:function(){var a=1440,t=(this.day+.5)%1,e=a*t;return u(e)},meanClock:function(){var a=1440,t=(this.day*(1-1/this.daysPerYear)+n["a"]/h+.5)%1,e=a*t;return u(e)},solarClock:function(){var a=1440,t=(this.day*(1-1/this.daysPerYear)+n["a"]/h+.5+this.getEOT()/h)%1,e=a*t;return u(e)},handsOff:function(){return this.player.paused||this.copilotState.handsOff},enableDragging:function(){return this.showSun||this.showEarthOrbits},solarLabelAbove:function(){var a=this.cameraTheta/h,t=Object(n["d"])(this.orbitalPosition+a,1)<.5,e=this.cameraTopDown;return this.eot>0^t^e},cameraTheta:function(){var a=this.copilotState.cameraPosition.x,t=this.copilotState.cameraPosition.z;return Object(n["d"])(Math.atan2(t,a),h)},cameraTopDown:function(){var a=this.copilotState.cameraPosition.y;return a>=0}},m(["highlight","highlightControl","orbitalPosition","eccentricity","tiltAngle","cameraTarget","cameraFollow","solarDaysPerYear","showEarthOrbits","showSunOrbits","showEOTWedge","showSun","showMeanSun","showMonthLabels","showSiderialDayArc","showMeanDayArc","showSolarDayArc","showPM","showGrid","showStellarClock","showSolarClock","showMeanClock","showDegrees"],{relaxDelay:1e3,relaxDuration:1e3,easing:f})),watch:{handsOff:function(a){this.frames.freeze(a,!0)}},created:function(){var a=this;this.queues=[],this.initCopilot();var t=this.frames;this.setState(Object(r["a"])({},this.frames._defaultState));var e=s.a.Animation.Smoothener(t,{duration:80}),i=function(){var a=t.state;e.setState(a)},o=0,n=function(e){a.beforeFrame();var r=t.state,i=o?1e3/60:o-e;o=e,a.onFrame(r,i)},l=this.player.$watch("time",function(e){t.seek(e),a.execQueues(e)});t.on("update",i),this.$on("hook:mounted",function(){a.player.$on("frame",n)}),this.$on("hook:beforeDestroy",function(){l(),t.off(),a.player.$off("frame",n)});var h=function(){a.pauseOnPlay&&(a.paused=!0)};this.player.$on("play",h),this.$on("hook:beforeDestroy",function(){a.player.$off("play",h)})},mounted:function(){var a=this,t=function(){var t=1,e=window.innerWidth;e<=720&&(t=e/720),a.cameraZoomCorrection=t};window.addEventListener("resize",t),this.$on("hook:beforeDestroy",function(){return window.removeEventListener("resize",t)}),t()},methods:{beforeFrame:function(){var a=this.orbitalPosition;if(this.handsOff&&!this.paused){a+=this.playRate/100,a=Object(n["d"])(a,1);var t=this.frames.getStateAt(this.frames.time).orbitalPosition;a=t+d(t,a,1),this.orbitalPosition={$value:a,$meddleOptions:{freeze:this.handsOff,relaxDelay:0,relaxDuration:1,easing:s.a.Easing.Quadratic.InOut}}}else if(this.paused&&this.yearAngleDrag){var e=this.yearAngleDrag/h,r=.5,i=e-a;Math.abs(i)>r&&(i>0?i-=1:i+=1),a+=.05*i,a=Object(n["d"])(a,this.daysPerYear);var o=this.frames.getStateAt(this.frames.time).orbitalPosition;a=o+d(o,a,1),this.orbitalPosition={$value:a,$meddleOptions:{freeze:this.handsOff,relaxDelay:1e3,relaxDuration:1e3,easing:f}}}},onFrame:function(a){this.setState(a)},setState:function(a){this.$refs.sim&&this.$refs.sim.setCameraProperties({position:a.cameraPosition,zoom:a.cameraZoom*this.cameraZoomCorrection}),this.copilotState=a},dragStart:function(){this.dragging=!0,this.prevPauseState=this.paused,this.paused=!0},drag:function(a){this.yearAngleDrag=this.meanAnomaly+a},dragEnd:function(){this.dragging=!1,this.yearAngleDrag=!1,this.paused=this.prevPauseState},meddleCamera:function(a){var t={};a&&(t.cameraPosition=a.position.clone(),t.cameraZoom=a.zoom/this.cameraZoomCorrection),this.frames.meddle("camera",t,{relaxDelay:1e3,relaxDuration:1e3,freeze:this.handsOff||this.cameraDragging,easing:s.a.Easing.Cubic.InOut})},setQueue:function(a,t){var e=s.a.Parsers.timeParser(a);this.queues.push({time:e,fn:t})},execQueues:function(a){var t=this.lastQueueTime||0;this.lastQueueTime=a,t>=a||this.queues.forEach(function(e){a<e.time||e.time<=t||e.fn()})},getEOT:function(){var a=this.meanAnomaly%h,t=this.eccentricity,e=this.tiltAngle,r=n["a"]-n["b"];return Object(n["c"])(a,t,e,r)}}}},"2efb":function(a,t,e){"use strict";var r=e("ea9b"),i=e.n(r);i.a},ea9b:function(a,t,e){},eed7:function(a,t,e){"use strict";e.r(t);var r=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"chapter"},[e("SimControls",{attrs:{handsOff:a.handsOff,paused:a.paused,playRate:a.playRate,cameraTarget:a.cameraTarget,cameraFollow:a.cameraFollow,solarDaysPerYear:a.solarDaysPerYear,useStellarDays:!0,highlight:a.highlightControl},on:{"update:paused":function(t){a.paused=t},"update:playRate":function(t){a.playRate=t},"update:play-rate":function(t){a.playRate=t},"update:cameraTarget":function(t){a.cameraTarget=t},"update:camera-target":function(t){a.cameraTarget=t},"update:cameraFollow":function(t){a.cameraFollow=t},"update:camera-follow":function(t){a.cameraFollow=t},"update:solarDaysPerYear":function(t){a.solarDaysPerYear=t},"update:solar-days-per-year":function(t){a.solarDaysPerYear=t}}}),e("DaySim",{ref:"sim",attrs:{viewWidth:a.viewWidth,viewHeight:a.viewHeight,playerLoading:a.playerLoading,highlight:a.highlight,showGrid:a.showGrid,cameraTarget:a.cameraTarget,cameraFollow:a.cameraFollow,showEarthOrbits:a.showEarthOrbits,showSunOrbits:a.showSunOrbits,showEOTWedge:a.showEOTWedge,showSun:a.showSun,showMeanSun:a.showMeanSun,showSiderialDayArc:a.showSiderialDayArc,showMeanDayArc:a.showMeanDayArc,showSolarDayArc:a.showSolarDayArc,showPM:a.showPM,tiltAngle:a.tiltAngle*a.deg,eccentricity:a.eccentricity,days:a.day,daysPerYear:a.daysPerYear,enableDragging:a.enableDragging},on:{dragstart:a.dragStart,drag:a.drag,dragend:a.dragEnd,"camera:start":function(t){a.cameraDragging=!0},"camera:end":function(t){a.cameraDragging=!1,a.meddleCamera()},"camera:change":a.meddleCamera}},[e("div",{staticClass:"earth-label",attrs:{slot:"earth-label"},slot:"earth-label"},[e("transition",{attrs:{name:"fade"}},[a.showDegrees?e("label",{staticClass:"angle-label"},[a._v(a._s(a.dayAngle.toFixed(0))),e("span",{staticClass:"degrees"},[a._v("Â°")])]):a._e()])],1),e("div",{staticClass:"stellar-label",attrs:{slot:"stellar-label"},slot:"stellar-label"},[e("transition",{attrs:{name:"fade"}},[a.showStellarClock?e("div",{staticClass:"clock"},[e("div",{staticClass:"time"},[a._v(a._s(a.siderealClock))])]):a._e()])],1)])],1)},i=[],o=(e("7f7f"),e("ac6a"),e("c5f6"),e("5001")),s=e.n(o),n=e("5a89"),l=e("25e6"),h=e("d45c"),c=e("6b4b"),d=e("0b5c"),u={name:"stellar-days",mixins:[d["a"]],components:{DaySim:l["a"],EOTGraph:h["a"],SimControls:c["a"]},data:function(){return{}},methods:{initCopilot:function(){var a=this,t=8,e=this.frames=s()({handsOff:{type:Boolean,default:!1,interpolatorOpts:{threshold:0}},highlight:{type:String,default:"",interpolator:s.a.Interpolators.Step,interpolatorOpts:{threshold:0}},highlightControl:{type:String,default:"",interpolator:s.a.Interpolators.Step,interpolatorOpts:{threshold:0}},orbitalPosition:{type:Number,default:0,interpolatorOpts:{modulo:1}},solarDaysPerYear:t,tiltAngle:0,eccentricity:0,cameraTarget:{type:String,default:"earth",interpolator:s.a.Interpolators.Step,interpolatorOpts:{threshold:0}},cameraFollow:!1,showEarthOrbits:!0,showSunOrbits:!1,showEOTWedge:!1,showSun:!0,showMeanSun:!1,showSiderialDayArc:!0,showMeanDayArc:!1,showSolarDayArc:!1,showPM:!0,showGrid:!1,showStellarClock:!0,showSolarClock:!1,showDegrees:!0,cameraPosition:{type:"Vector3",default:new n["Vector3"](-5,20,30)},cameraRotation:{type:"Vector3",default:new n["Vector3"](0,0,0)},cameraZoom:40},{defaultTransitionDuration:"3s"});function r(a){a.forEach(function(a){e.add({highlightControl:a.name},{time:a.start,duration:1}),e.add({highlightControl:""},{time:a.end,duration:1})})}e.add({solarDaysPerYear:t,orbitalPosition:0,showPM:!1,showSiderialDayArc:!1,showSun:!1,showEarthOrbits:!1,showDegrees:!1,showStellarClock:!1,cameraZoom:80},{time:1,duration:1}),e.add({orbitalPosition:.135},{time:"8s",duration:"100%"}),e.add({cameraPosition:new n["Vector3"](-5,50,30)},{time:"8s",duration:"1s",easing:s.a.Easing.Quadratic.InOut}),e.add({showPM:!0},{time:"8s",duration:"1s"}),e.add({cameraPosition:new n["Vector3"](-5,-50,30)},{time:"13s",duration:"5s",easing:s.a.Easing.Sinusoidal.InOut}),e.add({orbitalPosition:2/(t+1),cameraPosition:new n["Vector3"](0,20,0)},{time:"14s",duration:"1s",easing:s.a.Easing.Quadratic.InOut}),e.add({showSiderialDayArc:!0,showDegrees:!0},{time:"15s",duration:"1s"}),e.add({orbitalPosition:3/(t+1)},{time:"19s",startTime:"15s",easing:s.a.Easing.Quadratic.InOut}),e.add({showStellarClock:!0},{time:"20s"}),e.add({highlight:"stellar-day-arc"},{time:"29s",duration:1}),e.add({highlight:""},{time:"35s",duration:1}),e.add({orbitalPosition:8/(t+1)},{time:"35s",startTime:"19s"}),e.add({cameraZoom:20,showSun:!0,showEarthOrbits:!0},{time:"56s",duration:"1s",easing:s.a.Easing.Quadratic.InOut}),e.add({orbitalPosition:1},{time:"01:00",startTime:"41s"}),e.add({orbitalPosition:1.5},{startTime:"01:11",time:"01:16"}),e.add({cameraZoom:40},{time:"01:16",duration:"1s",easing:s.a.Easing.Quadratic.InOut}),e.add({cameraPosition:new n["Vector3"](-5,20,30)},{time:"01:29",duration:"1s",easing:s.a.Easing.Sinusoidal.InOut}),e.add({highlight:"earth"},{time:"01:52",duration:1}),e.add({highlight:""},{time:"01:58",duration:1}),r([{name:"auto-orbit",start:"01:58",end:"02:03"},{name:"orbit-speed",start:"02:04",end:"02:08"},{name:"camera-target",start:"02:12",end:"02:17"},{name:"follow-orbit",start:"02:18",end:"02:24"},{name:"settings",start:"02:31",end:"02:36"}]),e.add({handsOff:!0},{time:"03:08",startTime:"01:29"}),this.setQueue("01:29",function(){a.paused=!1})}}},m=u,f=(e("2efb"),e("2877")),g=Object(f["a"])(m,r,i,!1,null,"0c06bc4a",null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-6f93febf.7634d859.js.map