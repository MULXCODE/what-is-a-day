(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14ace2d4"],{"0b5c":function(a,t,e){"use strict";e("ac6a");var r=e("cebc"),o=(e("c5f6"),e("bd86")),i=e("5001"),s=e.n(i),n=e("7a05"),l=e("ac99"),c=2*Math.PI,h=Math.PI/180;function u(a,t,e){var r=.5*e,o=(t-a)%e;return(o-r)%e+r}function d(a){var t=Math.floor(a/60),e=Math.floor(a-60*t),r=t>=12?"pm":"am";return"pm"===r&&(t-=12),t=(t+11)%12+1,t<10&&(t="0"+t),e<10&&(e="0"+e),"".concat(t,":").concat(e).concat(r)}function m(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a.reduce(function(a,e){return a[e]={get:function(){return this.copilotState[e]},set:function(a){if(a!==this.copilotState[e]){var r=t;a.$meddleOptions&&(r=a.$meddleOptions,a=a.$value),this.frames.meddle(Object(o["a"])({},e,a),r),"orbitalPosition"!==e&&Object(l["a"])(this,e,a)}}},a},{})}var f=s.a.Easing.Elastic.Out;t["a"]={inject:["player"],props:{viewWidth:Number,viewHeight:Number,playerLoading:Boolean},data:function(){return{deg:h,pauseOnPlay:!0,cameraZoomCorrection:1,showEarthOptionsModal:!1,cameraDragging:!1,controlsOpen:!1,graphOpen:!1,paused:!0,yearAngleDrag:!1,playRate:.1,copilotState:{}}},computed:Object(r["a"])({daysPerYear:function(){return this.solarDaysPerYear+1},eot:function(){return this.getEOT()},radsPerYear:function(){return c/this.daysPerYear},meanAnomaly:function(){return this.day*this.radsPerYear-n["a"]},day:function(){return this.orbitalPosition*this.daysPerYear},dayAngle:function(){return(360*this.day-1)%360+1},siderealClock:function(){var a=1440,t=(this.day+.5)%1,e=a*t;return d(e)},meanClock:function(){var a=1440,t=(this.day*(1-1/this.daysPerYear)+n["a"]/c+.5)%1,e=a*t;return d(e)},solarClock:function(){var a=1440,t=(this.day*(1-1/this.daysPerYear)+n["a"]/c+.5+this.getEOT()/c)%1,e=a*t;return d(e)},handsOff:function(){return this.player.paused||this.copilotState.handsOff},enableDragging:function(){return this.showSun||this.showEarthOrbits},solarLabelAbove:function(){var a=this.cameraTheta/c,t=Object(n["d"])(this.orbitalPosition+a,1)<.5,e=this.cameraTopDown;return this.eot>0^t^e},cameraTheta:function(){var a=this.copilotState.cameraPosition.x,t=this.copilotState.cameraPosition.z;return Object(n["d"])(Math.atan2(t,a),c)},cameraTopDown:function(){var a=this.copilotState.cameraPosition.y;return a>=0}},m(["highlight","highlightControl","orbitalPosition","eccentricity","tiltAngle","cameraTarget","cameraFollow","solarDaysPerYear","showEarthOrbits","showSunOrbits","showEOTWedge","showSun","showMeanSun","showMonthLabels","showSiderialDayArc","showMeanDayArc","showSolarDayArc","showPM","showGrid","showStellarClock","showSolarClock","showMeanClock","showDegrees"],{relaxDelay:1e3,relaxDuration:1e3,easing:f})),watch:{handsOff:function(a){this.frames.freeze(a,!0)}},created:function(){var a=this;this.queues=[],this.initCopilot();var t=this.frames;this.setState(Object(r["a"])({},this.frames._defaultState));var e=s.a.Animation.Smoothener(t,{duration:80}),o=function(){var a=t.state;e.setState(a)},i=0,n=function(e){a.beforeFrame();var r=t.state,o=i?1e3/60:i-e;i=e,a.onFrame(r,o)},l=this.player.$watch("time",function(e){t.seek(e),a.execQueues(e)});t.on("update",o),this.$on("hook:mounted",function(){a.player.$on("frame",n)}),this.$on("hook:beforeDestroy",function(){l(),t.off(),a.player.$off("frame",n)});var c=function(){a.pauseOnPlay&&(a.paused=!0)};this.player.$on("play",c),this.$on("hook:beforeDestroy",function(){a.player.$off("play",c)})},mounted:function(){var a=this,t=function(){var t=1,e=window.innerWidth;e<=720&&(t=e/720),a.cameraZoomCorrection=t};window.addEventListener("resize",t),this.$on("hook:beforeDestroy",function(){return window.removeEventListener("resize",t)}),t()},methods:{beforeFrame:function(){var a=this.orbitalPosition;if(this.handsOff&&!this.paused){a+=this.playRate/100,a=Object(n["d"])(a,1);var t=this.frames.getStateAt(this.frames.time).orbitalPosition;a=t+u(t,a,1),this.orbitalPosition={$value:a,$meddleOptions:{freeze:this.handsOff,relaxDelay:0,relaxDuration:1,easing:s.a.Easing.Quadratic.InOut}}}else if(this.paused&&this.yearAngleDrag){var e=this.yearAngleDrag/c,r=.5,o=e-a;Math.abs(o)>r&&(o>0?o-=1:o+=1),a+=.05*o,a=Object(n["d"])(a,this.daysPerYear);var i=this.frames.getStateAt(this.frames.time).orbitalPosition;a=i+u(i,a,1),this.orbitalPosition={$value:a,$meddleOptions:{freeze:this.handsOff,relaxDelay:1e3,relaxDuration:1e3,easing:f}}}},onFrame:function(a){this.setState(a)},setState:function(a){this.$refs.sim&&this.$refs.sim.setCameraProperties({position:a.cameraPosition,zoom:a.cameraZoom*this.cameraZoomCorrection}),this.copilotState=a},dragStart:function(){this.dragging=!0,this.prevPauseState=this.paused,this.paused=!0},drag:function(a){this.yearAngleDrag=this.meanAnomaly+a},dragEnd:function(){this.dragging=!1,this.yearAngleDrag=!1,this.paused=this.prevPauseState},meddleCamera:function(a){var t={};a&&(t.cameraPosition=a.position.clone(),t.cameraZoom=a.zoom/this.cameraZoomCorrection),this.frames.meddle("camera",t,{relaxDelay:1e3,relaxDuration:1e3,freeze:this.handsOff||this.cameraDragging,easing:s.a.Easing.Cubic.InOut})},setQueue:function(a,t){var e=s.a.Parsers.timeParser(a);this.queues.push({time:e,fn:t})},execQueues:function(a){var t=this.lastQueueTime||0;this.lastQueueTime=a,t>=a||this.queues.forEach(function(e){a<e.time||e.time<=t||e.fn()})},getEOT:function(){var a=this.meanAnomaly%c,t=this.eccentricity,e=this.tiltAngle,r=n["a"]-n["b"];return Object(n["c"])(a,t,e,r)}}}},"6ef2":function(a,t,e){"use strict";e.r(t);var r=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"chapter"},[e("SimControls",{attrs:{handsOff:a.handsOff,paused:a.paused,playRate:a.playRate,cameraTarget:a.cameraTarget,cameraFollow:a.cameraFollow,solarDaysPerYear:a.solarDaysPerYear,showSolarClock:a.showSolarClock,showStellarClock:a.showStellarClock,useStellarDays:!0},on:{"update:paused":function(t){a.paused=t},"update:playRate":function(t){a.playRate=t},"update:play-rate":function(t){a.playRate=t},"update:cameraTarget":function(t){a.cameraTarget=t},"update:camera-target":function(t){a.cameraTarget=t},"update:cameraFollow":function(t){a.cameraFollow=t},"update:camera-follow":function(t){a.cameraFollow=t},"update:solarDaysPerYear":function(t){a.solarDaysPerYear=t},"update:solar-days-per-year":function(t){a.solarDaysPerYear=t},"update:showSolarClock":function(t){a.showSolarClock=t},"update:show-solar-clock":function(t){a.showSolarClock=t},"update:showStellarClock":function(t){a.showStellarClock=t},"update:show-stellar-clock":function(t){a.showStellarClock=t}}}),e("DaySim",{ref:"sim",attrs:{viewWidth:a.viewWidth,viewHeight:a.viewHeight,highlight:a.highlight,playerLoading:a.playerLoading,showGrid:a.showGrid,cameraTarget:a.cameraTarget,cameraFollow:a.cameraFollow,showEarthOrbits:a.showEarthOrbits,showSunOrbits:a.showSunOrbits,showEOTWedge:a.showEOTWedge,showSun:a.showSun,showMeanSun:a.showMeanSun,showSiderialDayArc:a.showSiderialDayArc,showMeanDayArc:a.showMeanDayArc,showSolarDayArc:a.showSolarDayArc,showPM:a.showPM,tiltAngle:a.tiltAngle*a.deg,eccentricity:a.eccentricity,days:a.day,daysPerYear:a.daysPerYear,enableDragging:a.enableDragging},on:{dragstart:a.dragStart,drag:a.drag,dragend:a.dragEnd,"camera:start":function(t){a.cameraDragging=!0},"camera:end":function(t){a.cameraDragging=!1,a.meddleCamera()},"camera:change":a.meddleCamera}},[e("div",{staticClass:"earth-label",attrs:{slot:"earth-label"},slot:"earth-label"},[e("transition",{attrs:{name:"fade"}},[a.showDegrees?e("label",{staticClass:"angle-label"},[a._v(a._s(a.dayAngle.toFixed(0))),e("span",{staticClass:"degrees"},[a._v("Â°")])]):a._e()])],1),e("div",{staticClass:"stellar-label",class:{up:a.orbitalPosition%1<.5,down:a.orbitalPosition%1>=.5},attrs:{slot:"stellar-label"},slot:"stellar-label"},[e("transition",{attrs:{name:"fade"}},[a.showStellarClock?e("div",{staticClass:"clock"},[e("div",{staticClass:"time"},[a._v(a._s(a.siderealClock))])]):a._e()])],1),e("div",{staticClass:"solar-label",class:{down:a.orbitalPosition%1<.5,up:a.orbitalPosition%1>=.5},attrs:{slot:"solar-label"},slot:"solar-label"},[e("transition",{attrs:{name:"fade"}},[a.showSolarClock?e("div",{staticClass:"clock"},[e("div",{staticClass:"time"},[a._v(a._s(a.meanClock))])]):a._e()])],1)])],1)},o=[],i=(e("c5f6"),e("5001")),s=e.n(i),n=e("5a89"),l=e("25e6"),c=e("d45c"),h=e("6b4b"),u=e("0b5c"),d=e("7a05"),m=2*Math.PI,f={name:"solar-days",mixins:[u["a"]],components:{DaySim:l["a"],EOTGraph:c["a"],SimControls:h["a"]},data:function(){return{}},methods:{initCopilot:function(){var a=this,t=8;function e(a){var e=t+1;return(a-d["a"]/m)/(e-1)}var r=this.frames=s()({handsOff:{type:Boolean,default:!1,interpolatorOpts:{threshold:0}},highlight:{type:String,default:"",interpolator:s.a.Interpolators.Step,interpolatorOpts:{threshold:0}},orbitalPosition:{type:Number,default:0,interpolatorOpts:{modulo:1}},solarDaysPerYear:t,tiltAngle:0,eccentricity:0,cameraTarget:{type:String,default:"earth",interpolator:s.a.Interpolators.Step,interpolatorOpts:{threshold:0}},cameraFollow:!1,showEarthOrbits:!0,showSunOrbits:!1,showEOTWedge:!1,showSun:!0,showMeanSun:!1,showSiderialDayArc:!0,showMeanDayArc:!1,showSolarDayArc:!0,showPM:!0,showGrid:!1,showStellarClock:!0,showSolarClock:!0,showDegrees:!0,cameraPosition:{type:"Vector3",default:new n["Vector3"](-5,20,30)},cameraRotation:{type:"Vector3",default:new n["Vector3"](0,0,0)},cameraZoom:40},{defaultTransitionDuration:"3s"});r.add({solarDaysPerYear:t,orbitalPosition:e(5),showDegrees:!1},{time:1,duration:1}),r.add({highlight:"solar-day-arc"},{time:"8s",duration:1}),r.add({highlight:""},{time:"12s",duration:1}),r.add({orbitalPosition:e(8)},{time:"00:20",startTime:1}),r.add({cameraZoom:80,cameraPosition:new n["Vector3"](0,20,.1)},{time:"00:22",easing:s.a.Easing.Quadratic.InOut}),r.add({showDegrees:!0},{time:"00:23"}),r.add({orbitalPosition:1/(t+1)},{time:"00:30",startTime:"00:25"}),r.add({orbitalPosition:2/(t+1),cameraZoom:60},{time:"00:40",startTime:"00:36"}),r.add({orbitalPosition:e(2)},{time:"00:46",startTime:"00:44"}),r.add({cameraPosition:new n["Vector3"](0,20,10),cameraZoom:40},{time:"00:52",startTime:"00:50",easing:s.a.Easing.Quadratic.InOut}),r.add({handsOff:!0},{time:"01:10",startTime:"00:50"}),this.setQueue("00:50",function(){a.paused=!1})}}},g=f,p=(e("ec4b"),e("2877")),w=Object(p["a"])(g,r,o,!1,null,"30886d1e",null);t["default"]=w.exports},a0df:function(a,t,e){},ec4b:function(a,t,e){"use strict";var r=e("a0df"),o=e.n(r);o.a}}]);
//# sourceMappingURL=chunk-14ace2d4.3eafe129.js.map