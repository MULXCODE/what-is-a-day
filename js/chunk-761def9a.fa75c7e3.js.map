{"version":3,"sources":["webpack:///./src/components/chapters/chapter.mixin.js","webpack:///./src/components/chapters/elliptic-orbit/index.vue?edbe","webpack:///src/components/chapters/elliptic-orbit/index.vue","webpack:///./src/components/chapters/elliptic-orbit/index.vue?d099","webpack:///./src/components/chapters/elliptic-orbit/index.vue?c1c3","webpack:///./src/components/chapters/elliptic-orbit/index.vue?62ec"],"names":["Pi2","Math","PI","deg","shortestDistance","a0","a1","modulo","moduloBy2","da","clockFromMinutes","n","hours","floor","minutes","ampm","concat","meddleProps","props","arguments","length","undefined","meddleOptions","reduce","result","key","get","this","copilotState","set","val","opts","$meddleOptions","$value","frames","meddle","Object","_Users_wellcaffeinated_Documents_github_minutelabsio_what_is_a_day_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__","trackMeddle","meddleEasing","Copilot","Easing","Elastic","Out","__webpack_exports__","inject","viewWidth","Number","viewHeight","playerLoading","Boolean","data","pauseOnPlay","cameraZoomCorrection","showEarthOptionsModal","cameraDragging","controlsOpen","graphOpen","paused","yearAngleDrag","playRate","computed","_Users_wellcaffeinated_Documents_github_minutelabsio_what_is_a_day_node_modules_babel_runtime_corejs2_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","daysPerYear","solarDaysPerYear","eot","getEOT","radsPerYear","meanAnomaly","day","PERHELION","orbitalPosition","dayAngle","siderealClock","minutesPerDay","dayFrac","meanClock","solarClock","handsOff","player","enableDragging","showSun","showEarthOrbits","solarLabelAbove","camAdjust","cameraTheta","earthIsRight","euclideanModulo","topDown","cameraTopDown","x","cameraPosition","z","atan2","y","relaxDelay","relaxDuration","easing","watch","freeze","created","_this","queues","initCopilot","setState","_defaultState","smoother","Animation","Smoothener","duration","onFrameUpdate","state","lastTime","onFrame","now","beforeFrame","dt","unwatch","$watch","time","seek","execQueues","on","$on","off","$off","stopOrbitOnPlay","mounted","_this2","fixZoom","corr","w","window","innerWidth","addEventListener","removeEventListener","methods","playerPosition","getStateAt","Quadratic","InOut","targetPosition","halfYear","delta","abs","$refs","sim","setCameraProperties","position","zoom","cameraZoom","dragStart","dragging","prevPauseState","drag","amount","dragEnd","meddleCamera","params","clone","Cubic","setQueue","ts","fn","Parsers","timeParser","push","lastQueueTime","forEach","q","M","e","eccentricity","tiltAngle","p","VERNAL","calcEOT","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","highlight","highlightControl","cameraTarget","cameraFollow","showGrid","showSunOrbits","showMeanSun","showEOTWedge","update:paused","$event","update:playRate","update:play-rate","update:graphOpen","update:graph-open","update:cameraTarget","update:camera-target","update:cameraFollow","update:camera-follow","update:solarDaysPerYear","update:solar-days-per-year","update:eccentricity","update:showGrid","update:show-grid","update:showEarthOrbits","update:show-earth-orbits","update:showSunOrbits","update:show-sun-orbits","update:showSun","update:show-sun","update:showMeanSun","update:show-mean-sun","update:showEOTWedge","update:show-e-o-t-wedge","tilt","mean-anomaly","_e","ref","showMonthLabels","showSiderialDayArc","showMeanDayArc","showSolarDayArc","showPM","days","dragstart","dragend","camera:start","camera:end","camera:change","slot","name","_v","_s","toFixed","class","disableLabelCorrection","down","up","pulse","highlightSolarClock","staticRenderFns","elliptic_orbitvue_type_script_lang_js_","mixins","chapter_mixin","components","DaySim","day_sim","EOTGraph","eot_graph","SimControls","sim_controls","solarDaysToOrbitalPos","dpy","stellar_mechanics","copilot_default","type","default","interpolatorOpts","threshold","String","interpolator","a","Interpolators","Step","showStellarClock","showSolarClock","showMeanClock","showDegrees","three_module","cameraRotation","defaultTransitionDuration","controlsHighlights","list","prop","hl","add","defineProperty","start","end","startTime","chapters_elliptic_orbitvue_type_script_lang_js_","component","componentNormalizer","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_9_oneOf_1_0_node_modules_css_loader_index_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_b86d3f1c_scoped_true_lang_sass___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_9_oneOf_1_0_node_modules_css_loader_index_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_b86d3f1c_scoped_true_lang_sass___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-761def9a.fa75c7e3.js","sourcesContent":["import Copilot from 'copilot'\nimport { PERHELION, VERNAL, euclideanModulo, calcEOT } from '@/lib/stellar-mechanics'\nimport trackMeddle from '@/lib/track-meddle'\n\nconst Pi2 = Math.PI * 2\nconst deg = Math.PI / 180\n\nfunction shortestDistance( a0, a1, modulo ){\n  let moduloBy2 = 0.5 * modulo\n  let da = (a1 - a0) % modulo\n\n  return (da - moduloBy2) % modulo + moduloBy2\n}\n\n// input minutes\nfunction clockFromMinutes( n ){\n  let hours   = Math.floor(n / 60)\n  let minutes = Math.floor(n - (hours * 60))\n  let ampm = hours >= 12 ? 'pm' : 'am'\n  if ( ampm === 'pm' ){ hours -= 12 }\n\n  hours = (hours + 11) % 12 + 1\n\n  if ( hours < 10 ) { hours = '0' + hours }\n  if ( minutes < 10 ) { minutes = '0' + minutes }\n\n  return `${hours}:${minutes}${ampm}`\n}\n\nfunction meddleProps( props = [], meddleOptions = {} ){\n  return props.reduce(( result, key ) => {\n    result[key] = {\n      get: function(){\n        return this.copilotState[key]\n      }\n      , set: function( val ){\n        if ( val === this.copilotState[key] ){ return }\n        let opts = meddleOptions\n        if ( val.$meddleOptions ){\n          opts = val.$meddleOptions\n          val = val.$value\n        }\n        this.frames.meddle({ [key]: val }, opts)\n        if (key !== 'orbitalPosition'){\n          trackMeddle(this, key, val)\n        }\n      }\n    }\n    return result\n  }, {})\n}\n\nconst meddleEasing = Copilot.Easing.Elastic.Out\n\nexport default {\n  inject: [ 'player' ]\n  , props: {\n    viewWidth: Number\n    , viewHeight: Number\n    , playerLoading: Boolean\n  }\n  , data: () => ({\n    deg\n    , pauseOnPlay: true\n    , cameraZoomCorrection: 1\n    , showEarthOptionsModal: false\n\n    , cameraDragging: false\n    , controlsOpen: false\n    , graphOpen: false\n\n    , paused: true\n    , yearAngleDrag: false\n\n    , playRate: 0.1\n\n    , copilotState: {}\n  })\n  , computed: {\n    daysPerYear(){\n      return this.solarDaysPerYear + 1\n    }\n    , eot(){\n      return this.getEOT()\n    }\n    , radsPerYear(){\n      return (Pi2 / this.daysPerYear)\n    }\n    , meanAnomaly(){\n      return this.day * this.radsPerYear - PERHELION\n    }\n    , day(){\n      return this.orbitalPosition * this.daysPerYear\n    }\n    , dayAngle(){\n      return (this.day * 360 - 1) % 360 + 1\n    }\n    , siderealClock(){\n      const minutesPerDay = 24 * 60\n      let dayFrac = (this.day + 0.5) % 1\n      let minutes = minutesPerDay * dayFrac\n      return clockFromMinutes( minutes )\n    }\n    , meanClock(){\n      const minutesPerDay = 24 * 60\n      // perhelion should not matter for realistic days per year\n      // but need this to correct for weird days per year\n      let dayFrac = (this.day * (1 - 1/this.daysPerYear) + PERHELION/Pi2 + 0.5) % 1\n      let minutes = minutesPerDay * dayFrac\n      return clockFromMinutes( minutes )\n    }\n    , solarClock(){\n      const minutesPerDay = 24 * 60\n      let dayFrac = (this.day * (1 - 1/this.daysPerYear) + PERHELION/Pi2 + 0.5 + this.getEOT() / Pi2) % 1\n      let minutes = minutesPerDay * dayFrac\n      return clockFromMinutes( minutes )\n    }\n    , handsOff(){\n      return this.player.paused || this.copilotState.handsOff\n    }\n    , enableDragging(){\n      return this.showSun || this.showEarthOrbits\n    }\n    , solarLabelAbove(){\n      let camAdjust = this.cameraTheta / Pi2\n      let earthIsRight = euclideanModulo(this.orbitalPosition + camAdjust, 1) < 0.5\n      let topDown = this.cameraTopDown\n      return (this.eot > 0) ^ earthIsRight ^ topDown\n    }\n    , cameraTheta(){\n      let x = this.copilotState.cameraPosition.x\n      let z = this.copilotState.cameraPosition.z\n\n      return euclideanModulo(Math.atan2( z, x ), Pi2)\n    }\n    , cameraTopDown(){\n      let y = this.copilotState.cameraPosition.y\n\n      return y >= 0\n    }\n    // copilot managed\n    , ...meddleProps([\n      'highlight'\n      , 'highlightControl'\n      , 'orbitalPosition'\n      , 'eccentricity'\n      , 'tiltAngle'\n      , 'cameraTarget'\n      , 'cameraFollow'\n      , 'solarDaysPerYear'\n      , 'showEarthOrbits'\n      , 'showSunOrbits'\n      , 'showEOTWedge'\n      , 'showSun'\n      , 'showMeanSun'\n      , 'showMonthLabels'\n      , 'showSiderialDayArc'\n      , 'showMeanDayArc'\n      , 'showSolarDayArc'\n      , 'showPM'\n      , 'showGrid'\n\n      , 'showStellarClock'\n      , 'showSolarClock'\n      , 'showMeanClock'\n      , 'showDegrees'\n    ], { relaxDelay: 1000, relaxDuration: 1000, easing: meddleEasing })\n  }\n  , watch: {\n    handsOff( val ){\n      this.frames.freeze( val, true )\n    }\n  }\n  , created(){\n    this.queues = []\n\n    this.initCopilot()\n    const frames = this.frames\n\n    this.setState({ ...this.frames._defaultState })\n\n    let smoother = Copilot.Animation.Smoothener( frames, { duration: 80 } )\n\n    const onFrameUpdate = () => {\n      var state = frames.state\n\n      smoother.setState( state )\n    }\n\n    let lastTime = 0\n    const onFrame = ( now ) => {\n\n      this.beforeFrame()\n      let state = frames.state //smoother.update()\n\n      let dt = lastTime ? 1000/60 : lastTime - now\n      lastTime = now\n      this.onFrame( state, dt )\n    }\n\n    const unwatch = this.player.$watch('time', ( time ) => {\n      frames.seek( time )\n      this.execQueues( time )\n    })\n\n    frames.on('update', onFrameUpdate)\n\n    this.$on('hook:mounted', () => {\n      this.player.$on('frame', onFrame)\n    })\n\n    this.$on('hook:beforeDestroy', () => {\n      unwatch()\n      frames.off()\n      this.player.$off('frame', onFrame)\n    })\n\n    // end copilot\n\n    const stopOrbitOnPlay = () => { if ( this.pauseOnPlay ){ this.paused = true } }\n    this.player.$on('play', stopOrbitOnPlay)\n    this.$on('hook:beforeDestroy', () => {\n      this.player.$off('play', stopOrbitOnPlay)\n    })\n  }\n  , mounted(){\n    const fixZoom = () => {\n      let corr = 1\n      let w = window.innerWidth\n      if ( w <= 720 ){\n        corr = (w / 720)\n      }\n      this.cameraZoomCorrection = corr\n    }\n    window.addEventListener('resize', fixZoom)\n    this.$on('hook:beforeDestroy', () => window.removeEventListener('resize', fixZoom))\n    fixZoom()\n  }\n  , methods: {\n    beforeFrame(){\n      let orbitalPosition = this.orbitalPosition\n      if ( this.handsOff && !this.paused ){\n\n        orbitalPosition = orbitalPosition + this.playRate / 100\n        orbitalPosition = euclideanModulo(orbitalPosition, 1)\n        // ensure that the shortest path is taken to get to target\n        let playerPosition = this.frames.getStateAt( this.frames.time ).orbitalPosition\n        orbitalPosition = playerPosition + shortestDistance( playerPosition, orbitalPosition, 1 )\n        this.orbitalPosition = { $value: orbitalPosition, $meddleOptions: { freeze: this.handsOff, relaxDelay: 0, relaxDuration: 1, easing: Copilot.Easing.Quadratic.InOut } }\n\n      } else if ( this.paused && this.yearAngleDrag ){\n\n        let targetPosition = (this.yearAngleDrag) / Pi2\n        let halfYear = 0.5\n        let delta = (targetPosition - orbitalPosition)\n        if ( Math.abs(delta) > halfYear ){\n          if ( delta > 0 ){\n            delta -= 1\n          } else {\n            delta += 1\n          }\n        }\n        orbitalPosition = orbitalPosition + delta * 0.05\n        orbitalPosition = euclideanModulo(orbitalPosition, this.daysPerYear)\n        let playerPosition = this.frames.getStateAt( this.frames.time ).orbitalPosition\n        orbitalPosition = playerPosition + shortestDistance( playerPosition, orbitalPosition, 1 )\n        this.orbitalPosition = { $value: orbitalPosition, $meddleOptions: { freeze: this.handsOff, relaxDelay: 1000, relaxDuration: 1000, easing: meddleEasing } }\n      }\n    }\n    , onFrame( state ){\n      this.setState( state )\n    }\n    , setState( state ){\n      // camera\n      if ( this.$refs.sim ){\n        this.$refs.sim.setCameraProperties({\n          position: state.cameraPosition\n          // , rotation: state.cameraRotation\n          , zoom: state.cameraZoom * this.cameraZoomCorrection\n        })\n      }\n\n      // component data\n      this.copilotState = state\n    }\n    , dragStart(){\n      this.dragging = true\n      this.prevPauseState = this.paused\n      this.paused = true\n    }\n    , drag( amount ){\n      this.yearAngleDrag = this.meanAnomaly + amount\n    }\n    , dragEnd(){\n      this.dragging = false\n      this.yearAngleDrag = false\n      this.paused = this.prevPauseState\n    }\n    , meddleCamera(params){\n      let state = {}\n      if ( params ){\n        state.cameraPosition = params.position.clone()\n        // state.cameraRotation = params.rotation.clone()\n        state.cameraZoom = params.zoom / this.cameraZoomCorrection\n      }\n\n      this.frames.meddle('camera', state, { relaxDelay: 1000, relaxDuration: 1000, freeze: this.handsOff || this.cameraDragging, easing: Copilot.Easing.Cubic.InOut })\n    }\n    , setQueue(ts, fn){\n      let time = Copilot.Parsers.timeParser( ts )\n\n      this.queues.push({\n        time\n        , fn\n      })\n    }\n    , execQueues( time ){\n      let lastTime = this.lastQueueTime || 0\n\n      this.lastQueueTime = time\n\n      if ( lastTime >= time ){\n        return\n      }\n\n      this.queues.forEach( q => {\n        if ( time < q.time || q.time <= lastTime ){ return }\n\n        q.fn()\n      })\n    }\n    , getEOT(){\n      let M = this.meanAnomaly % Pi2\n      let e = this.eccentricity\n      let y = this.tiltAngle\n      let p = PERHELION - VERNAL\n      return calcEOT( M, e, y, p )\n    }\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chapter\"},[_c('SimControls',{attrs:{\"handsOff\":_vm.handsOff,\"highlight\":_vm.highlightControl,\"paused\":_vm.paused,\"playRate\":_vm.playRate,\"graphOpen\":_vm.graphOpen,\"cameraTarget\":_vm.cameraTarget,\"cameraFollow\":_vm.cameraFollow,\"solarDaysPerYear\":_vm.solarDaysPerYear,\"eccentricity\":_vm.eccentricity,\"showGrid\":_vm.showGrid,\"showEarthOrbits\":_vm.showEarthOrbits,\"showSunOrbits\":_vm.showSunOrbits,\"showSun\":_vm.showSun,\"showMeanSun\":_vm.showMeanSun,\"showEOTWedge\":_vm.showEOTWedge},on:{\"update:paused\":function($event){_vm.paused=$event},\"update:playRate\":function($event){_vm.playRate=$event},\"update:play-rate\":function($event){_vm.playRate=$event},\"update:graphOpen\":function($event){_vm.graphOpen=$event},\"update:graph-open\":function($event){_vm.graphOpen=$event},\"update:cameraTarget\":function($event){_vm.cameraTarget=$event},\"update:camera-target\":function($event){_vm.cameraTarget=$event},\"update:cameraFollow\":function($event){_vm.cameraFollow=$event},\"update:camera-follow\":function($event){_vm.cameraFollow=$event},\"update:solarDaysPerYear\":function($event){_vm.solarDaysPerYear=$event},\"update:solar-days-per-year\":function($event){_vm.solarDaysPerYear=$event},\"update:eccentricity\":function($event){_vm.eccentricity=$event},\"update:showGrid\":function($event){_vm.showGrid=$event},\"update:show-grid\":function($event){_vm.showGrid=$event},\"update:showEarthOrbits\":function($event){_vm.showEarthOrbits=$event},\"update:show-earth-orbits\":function($event){_vm.showEarthOrbits=$event},\"update:showSunOrbits\":function($event){_vm.showSunOrbits=$event},\"update:show-sun-orbits\":function($event){_vm.showSunOrbits=$event},\"update:showSun\":function($event){_vm.showSun=$event},\"update:show-sun\":function($event){_vm.showSun=$event},\"update:showMeanSun\":function($event){_vm.showMeanSun=$event},\"update:show-mean-sun\":function($event){_vm.showMeanSun=$event},\"update:showEOTWedge\":function($event){_vm.showEOTWedge=$event},\"update:show-e-o-t-wedge\":function($event){_vm.showEOTWedge=$event}}},[(_vm.graphOpen)?_c('div',{staticClass:\"eot-graph\"},[_c('EOTGraph',{attrs:{\"eccentricity\":_vm.eccentricity,\"tilt\":_vm.tiltAngle * _vm.deg,\"mean-anomaly\":_vm.meanAnomaly}})],1):_vm._e()]),_c('DaySim',{ref:\"sim\",attrs:{\"viewWidth\":_vm.viewWidth,\"viewHeight\":_vm.viewHeight,\"highlight\":_vm.highlight,\"playerLoading\":_vm.playerLoading,\"showGrid\":_vm.showGrid,\"cameraTarget\":_vm.cameraTarget,\"cameraFollow\":_vm.cameraFollow,\"showEarthOrbits\":_vm.showEarthOrbits,\"showSunOrbits\":_vm.showSunOrbits,\"showEOTWedge\":_vm.showEOTWedge,\"showSun\":_vm.showSun,\"showMeanSun\":_vm.showMeanSun,\"showMonthLabels\":_vm.showMeanSun,\"showSiderialDayArc\":_vm.showSiderialDayArc,\"showMeanDayArc\":_vm.showMeanDayArc,\"showSolarDayArc\":_vm.showSolarDayArc,\"showPM\":_vm.showPM,\"tiltAngle\":_vm.tiltAngle * _vm.deg,\"eccentricity\":_vm.eccentricity,\"days\":_vm.day,\"daysPerYear\":_vm.daysPerYear,\"enableDragging\":_vm.enableDragging},on:{\"dragstart\":_vm.dragStart,\"drag\":_vm.drag,\"dragend\":_vm.dragEnd,\"camera:start\":function($event){_vm.cameraDragging = true},\"camera:end\":function($event){_vm.cameraDragging = false; _vm.meddleCamera()},\"camera:change\":_vm.meddleCamera}},[_c('div',{staticClass:\"earth-label\",attrs:{\"slot\":\"earth-label\"},slot:\"earth-label\"},[_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.showDegrees)?_c('label',{staticClass:\"angle-label\"},[_vm._v(_vm._s(_vm.dayAngle.toFixed(0))),_c('span',{staticClass:\"degrees\"},[_vm._v(\"°\")])]):_vm._e()])],1),_c('div',{staticClass:\"mean-label\",class:_vm.copilotState.disableLabelCorrection ? {} : { down: _vm.solarLabelAbove, up: !_vm.solarLabelAbove },attrs:{\"slot\":\"mean-label\"},slot:\"mean-label\"},[_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.showMeanClock)?_c('div',{staticClass:\"clock\"},[_c('div',{staticClass:\"time\"},[_vm._v(_vm._s(_vm.meanClock))])]):_vm._e()])],1),_c('div',{staticClass:\"solar-label\",class:_vm.copilotState.disableLabelCorrection ? {} : { up: _vm.solarLabelAbove, down: !_vm.solarLabelAbove },attrs:{\"slot\":\"solar-label\"},slot:\"solar-label\"},[_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.showSolarClock)?_c('div',{staticClass:\"clock\",class:{ pulse: _vm.copilotState.highlightSolarClock }},[_c('div',{staticClass:\"time\"},[_vm._v(_vm._s(_vm.solarClock))])]):_vm._e()])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n.chapter\n  SimControls(\n    :handsOff=\"handsOff\"\n    , :highlight=\"highlightControl\"\n\n    , :paused.sync=\"paused\"\n    , :playRate.sync=\"playRate\"\n    , :graphOpen.sync=\"graphOpen\"\n    , :cameraTarget.sync=\"cameraTarget\"\n    , :cameraFollow.sync=\"cameraFollow\"\n    , :solarDaysPerYear.sync=\"solarDaysPerYear\"\n    , :eccentricity.sync=\"eccentricity\"\n\n    , :showGrid.sync=\"showGrid\"\n    , :showEarthOrbits.sync=\"showEarthOrbits\"\n    , :showSunOrbits.sync=\"showSunOrbits\"\n\n    , :showSun.sync=\"showSun\"\n    , :showMeanSun.sync=\"showMeanSun\"\n    , :showEOTWedge.sync=\"showEOTWedge\"\n  )\n    .eot-graph(v-if=\"graphOpen\")\n      EOTGraph(:eccentricity=\"eccentricity\", :tilt=\"tiltAngle * deg\", :mean-anomaly=\"meanAnomaly\")\n\n  DaySim(\n    ref=\"sim\"\n    , :viewWidth=\"viewWidth\"\n    , :viewHeight=\"viewHeight\"\n    , :highlight=\"highlight\"\n    , :playerLoading=\"playerLoading\"\n    , :showGrid=\"showGrid\"\n    , :cameraTarget=\"cameraTarget\"\n    , :cameraFollow=\"cameraFollow\"\n    , :showEarthOrbits=\"showEarthOrbits\"\n    , :showSunOrbits=\"showSunOrbits\"\n    , :showEOTWedge=\"showEOTWedge\"\n    , :showSun=\"showSun\"\n    , :showMeanSun=\"showMeanSun\"\n    , :showMonthLabels=\"showMeanSun\"\n    , :showSiderialDayArc=\"showSiderialDayArc\"\n    , :showMeanDayArc=\"showMeanDayArc\"\n    , :showSolarDayArc=\"showSolarDayArc\"\n    , :showPM=\"showPM\"\n\n    , :tiltAngle=\"tiltAngle * deg\"\n    , :eccentricity=\"eccentricity\"\n    , :days=\"day\"\n    , :daysPerYear=\"daysPerYear\"\n\n    , :enableDragging=\"enableDragging\"\n    , @dragstart=\"dragStart\"\n    , @drag=\"drag\"\n    , @dragend=\"dragEnd\"\n    , @camera:start=\"cameraDragging = true\"\n    , @camera:end=\"cameraDragging = false; meddleCamera()\"\n    , @camera:change=\"meddleCamera\"\n  )\n    .earth-label(slot=\"earth-label\")\n      transition(name=\"fade\")\n        label.angle-label(v-if=\"showDegrees\") {{dayAngle.toFixed(0)}}\n          span.degrees &deg;\n    .mean-label(slot=\"mean-label\", :class=\"copilotState.disableLabelCorrection ? {} : { down: solarLabelAbove, up: !solarLabelAbove }\")\n      transition(name=\"fade\")\n        .clock(v-if=\"showMeanClock\")\n          .time {{meanClock}}\n    .solar-label(slot=\"solar-label\", :class=\"copilotState.disableLabelCorrection ? {} : { up: solarLabelAbove, down: !solarLabelAbove }\")\n      transition(name=\"fade\")\n        .clock(v-if=\"showSolarClock\", :class=\"{ pulse: copilotState.highlightSolarClock }\")\n          .time {{solarClock}}\n</template>\n\n<script>\nimport Copilot from 'copilot'\nimport * as THREE from 'three'\nimport DaySim from '@/components/entities/day-sim'\nimport EOTGraph from '@/components/entities/eot-graph'\nimport SimControls from '@/components/sim-controls'\nimport chapterMixin from '@/components/chapters/chapter.mixin'\nimport { PERHELION, VERNAL, calcEOT } from '@/lib/stellar-mechanics'\n\nconst Pi2 = Math.PI * 2\n\nexport default {\n  name: 'elliptic-orbit'\n  , mixins: [ chapterMixin ]\n  , components: {\n    DaySim\n    , EOTGraph\n    , SimControls\n  }\n  , data: () => ({\n  })\n  , methods: {\n    initCopilot(){\n      const solarDaysPerYear = 8\n\n      function solarDaysToOrbitalPos( days, e = 0, y = 0 ){\n        const dpy = solarDaysPerYear + 1\n        let eot = 0\n        if ( e || y ){\n          eot = calcEOT( days/solarDaysPerYear * Pi2 - PERHELION, e, y, PERHELION - VERNAL )\n        }\n        return (days - PERHELION/Pi2 - eot/Pi2) / (dpy - 1)\n      }\n\n      // copilot\n      let frames = this.frames = Copilot({\n        handsOff: {\n          type: Boolean\n          , default: false\n          , interpolatorOpts: { threshold: 0 }\n        }\n        , highlight: {\n          type: String\n          , default: ''\n          , interpolator: Copilot.Interpolators.Step\n          , interpolatorOpts: { threshold: 0 }\n        }\n        , highlightControl: {\n          type: String\n          , default: ''\n          , interpolator: Copilot.Interpolators.Step\n          , interpolatorOpts: { threshold: 0 }\n        }\n        , highlightSolarClock: Boolean\n        , disableLabelCorrection: Boolean\n        , orbitalPosition: {\n          type: Number\n          , default: solarDaysToOrbitalPos(5) // {0, 1}\n          , interpolatorOpts: { modulo: 1 }\n        }\n        , solarDaysPerYear: solarDaysPerYear\n        , tiltAngle: 0\n        , eccentricity: 0\n        , cameraTarget: {\n          type: String\n          , default: 'sun'\n          , interpolator: Copilot.Interpolators.Step\n          , interpolatorOpts: { threshold: 0 }\n        }\n        , cameraFollow: false\n        , showEarthOrbits: true\n        , showSunOrbits: false\n        , showEOTWedge: false\n        , showSun: true\n        , showMeanSun: true\n        , showMonthLabels: true\n        , showSiderialDayArc: false\n        , showMeanDayArc: true\n        , showSolarDayArc: true\n        , showPM: true\n        , showGrid: false\n\n        , showStellarClock: true\n        , showSolarClock: true\n        , showMeanClock: true\n        , showDegrees: false\n\n        , cameraPosition: {\n          type: 'Vector3'\n          , default: new THREE.Vector3(0, 20, 0.1)\n        }\n        , cameraRotation: {\n          type: 'Vector3'\n          , default: new THREE.Vector3(0, 0, 0)\n        }\n        , cameraZoom: 20\n      }, {\n        defaultTransitionDuration: '3s'\n      })\n\n      function controlsHighlights( list, prop = 'highlightControl' ){\n        list.forEach(hl => {\n          frames.add({\n            [prop]: hl.name\n          }, {\n            time: hl.start\n            , duration: 1\n          })\n\n          frames.add({\n            [prop]: ''\n          }, {\n            time: hl.end\n            , duration: 1\n          })\n        })\n      }\n\n      frames.add({\n        solarDaysPerYear\n        , orbitalPosition: solarDaysToOrbitalPos(5)\n        , showDegrees: false\n        , showMeanSun: false\n        , showMeanClock: false\n        , showMeanDayArc: false\n        , disableLabelCorrection: true\n      }, {\n        time: 1\n        , duration: 1\n      })\n\n      frames.add({\n        orbitalPosition: PERHELION / Pi2\n      }, {\n        time: '00:20'\n        , startTime: 1\n      })\n\n      frames.add({\n        cameraPosition: new THREE.Vector3(0, 0, 20)\n      }, {\n        time: '00:07'\n        , startTime: '00:05'\n        , easing: Copilot.Easing.Quadratic.InOut\n      })\n\n      frames.add({\n        cameraPosition: new THREE.Vector3(0, 20, 0.1)\n      }, {\n        time: '00:10'\n        , startTime: '00:08'\n        , easing: Copilot.Easing.Quadratic.InOut\n      })\n\n      frames.add({\n        eccentricity: 0.4\n      }, {\n        time: '23s'\n        , duration: '1s'\n        , easing: Copilot.Easing.Quadratic.InOut\n      })\n\n      frames.add({\n        eccentricity: 0\n      }, {\n        time: '24s'\n        , duration: '1s'\n        , easing: Copilot.Easing.Quadratic.InOut\n      })\n\n      frames.add({\n        tiltAngle: 30\n      }, {\n        time: '25s'\n        , duration: '1s'\n        , easing: Copilot.Easing.Quadratic.InOut\n      })\n\n      frames.add({\n        tiltAngle: 0\n      }, {\n        time: '26s'\n        , duration: '1s'\n        , easing: Copilot.Easing.Quadratic.InOut\n      })\n\n      frames.add({\n        eccentricity: 0.5\n      }, {\n        time: '00:38'\n        , duration: '2s'\n        , easing: Copilot.Easing.Quadratic.InOut\n      })\n\n      controlsHighlights([\n        {\n          name: 'settings'\n          , start: '39s'\n          , end: '44s'\n        }\n      ])\n\n      frames.add({\n        orbitalPosition: 12.15\n      }, {\n        time: '02:40'\n        , startTime: '00:43'\n      })\n\n      frames.add({\n        highlightSolarClock: true\n        , cameraTarget: 'earth'\n      }, {\n        time: '01:21'\n        , duration: 1\n      })\n\n      frames.add({\n        highlightSolarClock: false\n        , showSun: false\n        , showEarthOrbits: false\n      }, {\n        time: '01:25'\n        , duration: 1\n      })\n\n      frames.add({\n        cameraZoom: 40\n      }, {\n        time: '01:30'\n        , duration: '6s'\n        , easing: Copilot.Easing.Quadratic.InOut\n      })\n\n      frames.add({\n        showMeanClock: true\n        , showMeanDayArc: true\n        , showSolarClock: false\n        , showSolarDayArc: false\n      }, {\n        time: '02:11'\n        , duration: 1\n      })\n\n      controlsHighlights([\n        {\n          name: 'mean-day-arc'\n          , start: '02:11'\n          , end: '02:15'\n        }\n      ], 'highlight')\n\n      frames.add({\n        cameraZoom: 30\n      }, {\n        time: '02:29'\n        , duration: '6s'\n        , easing: Copilot.Easing.Quadratic.InOut\n      })\n\n      frames.add({\n        showSun: true\n        , showEarthOrbits: true\n      }, {\n        time: '02:26'\n        , duration: 1\n      })\n\n      frames.add({\n        showMeanSun: true\n        , showSun: false\n      }, {\n        time: '02:44'\n        , duration: 1\n      })\n\n      frames.add({\n        orbitalPosition: 13 + solarDaysToOrbitalPos(0)\n      }, {\n        time: '03:02'\n        , startTime: '02:52'\n      })\n\n      frames.add({\n        showSun: true\n        , showSolarDayArc: true\n        , showSolarClock: true\n        , disableLabelCorrection: false\n      }, {\n        time: '03:02'\n        , duration: 1\n      })\n\n      frames.add({\n        eccentricity: 0\n      }, {\n        time: '03:10'\n        , duration: '1s'\n        , easing: Copilot.Easing.Quadratic.InOut\n      })\n\n      frames.add({\n        eccentricity: 0.5\n      }, {\n        time: '03:13'\n        , duration: '1s'\n        , easing: Copilot.Easing.Quadratic.InOut\n      })\n\n      frames.add({\n        orbitalPosition: 13 + solarDaysToOrbitalPos(7, 0.5)\n      }, {\n        time: '03:26'\n        , startTime: '03:13'\n      })\n\n      frames.add({\n        showEOTWedge: true\n      }, {\n        time: '03:27'\n        , duration: 1\n      })\n\n      frames.add({\n        orbitalPosition: 13 + solarDaysToOrbitalPos(7)\n      }, {\n        time: '03:39'\n        , startTime: '03:37'\n      })\n\n      frames.add({\n        orbitalPosition: 14 + solarDaysToOrbitalPos(2)\n        , cameraZoom: 20\n      }, {\n        time: '03:52'\n        , startTime: '03:49'\n        , easing: Copilot.Easing.Quadratic.InOut\n      })\n\n      this.setQueue('04:03', () => {\n        this.graphOpen = true\n      })\n\n      // last frame\n      frames.add({\n        handsOff: true\n      }, {\n        time: '04:38'\n        , startTime: '04:00'\n      })\n\n      this.setQueue('04:00', () => {\n        this.paused = false\n      })\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"sass\">\n.chapter\n  background: $background\n  cursor: crosshair\n  overflow: hidden\n\n.tools\n  position: absolute\n  z-index: 1\n  left: 3em\n  bottom: -1em\n  pointer-events: all\n\n  .icon-btn\n    cursor: pointer\n    transition: color 0.15s ease\n    color: $red\n    &:hover,\n    &:active\n      color: lighten($red, 10)\n\n.earth-label,\n.stellar-label,\n.solar-label,\n.mean-label\n  text-shadow: 0 0 3px rgba(0, 0, 0, 1)\n  font-family: $family-monospace\n\n  transition: bottom 0.3s ease\n  &.up\n    position: relative\n    bottom: 0.85em\n  &.down\n    position: relative\n    bottom: -0.85em\n.earth-label\n  position: relative\n  bottom: 1em\n.stellar-label\n  color: $blue\n.solar-label\n  color: $yellow\n.mean-label\n  color: $red\n.clock\n  position: absolute\n  margin-top: -1rem\n  right: 0\n  font-family: $family-monospace\n  text-align: center\n.angle-label\n  display: inline-block\n  width: 2.5em\n  text-align: center\n.degrees\n  letter-spacing: -1em\n\n.fade-enter-active,\n.fade-leave-active\n  transition: opacity 0.3s ease\n.fade-enter,\n.fade-leave-to\n  opacity: 0\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=b86d3f1c&scoped=true&lang=pug&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=b86d3f1c&scoped=true&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b86d3f1c\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=b86d3f1c&scoped=true&lang=sass&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=b86d3f1c&scoped=true&lang=sass&\""],"sourceRoot":""}